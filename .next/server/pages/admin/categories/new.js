"use strict";(()=>{var e={};e.id=678,e.ids=[678,888,660],e.modules={2131:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.r(a),t.d(a,{config:()=>x,default:()=>u,getServerSideProps:()=>g,getStaticPaths:()=>h,getStaticProps:()=>m,reportWebVitals:()=>j,routeModule:()=>C,unstable_getServerProps:()=>f,unstable_getServerSideProps:()=>_,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>b,unstable_getStaticProps:()=>v});var s=t(7093),n=t(5244),i=t(1323),l=t(9209),o=t.n(l),d=t(9597),c=t(2405),p=e([d,c]);[d,c]=p.then?(await p)():p;let u=(0,i.l)(c,"default"),m=(0,i.l)(c,"getStaticProps"),h=(0,i.l)(c,"getStaticPaths"),g=(0,i.l)(c,"getServerSideProps"),x=(0,i.l)(c,"config"),j=(0,i.l)(c,"reportWebVitals"),v=(0,i.l)(c,"unstable_getStaticProps"),b=(0,i.l)(c,"unstable_getStaticPaths"),y=(0,i.l)(c,"unstable_getStaticParams"),f=(0,i.l)(c,"unstable_getServerProps"),_=(0,i.l)(c,"unstable_getServerSideProps"),C=new s.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/admin/categories/new",pathname:"/admin/categories/new",bundlePath:"",filename:""},components:{App:d.default,Document:o()},userland:c});r()}catch(e){r(e)}})},2405:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.r(a),t.d(a,{default:()=>NewCategory});var s=t(997),n=t(6689),i=t(1163),l=t(3142),o=t(1842),d=t(3590),c=e([l,o,d]);function NewCategory(){let e=(0,i.useRouter)(),[a,t]=(0,n.useState)({name:"",slug:"",description:"",display_type:"default",parent:"",meta_title:"",meta_description:"",meta_keywords:"",isActive:!0}),[r,c]=(0,n.useState)([]),[p,u]=(0,n.useState)(null),[m,h]=(0,n.useState)(!1);function handleChange(e){let{name:a,value:r,type:s,checked:n}=e.target;t(e=>({...e,[a]:"checkbox"===s?n:r}))}function handleFiles(e){c(Array.from(e.target.files))}function handleThumbnail(e){u(e.target.files[0]||null)}async function handleSubmit(t){if(t.preventDefault(),!a.name.trim()){d.toast.error("Name is required");return}h(!0);try{let t=new FormData;t.append("name",a.name),a.slug&&t.append("slug",a.slug),t.append("description",a.description),t.append("display_type",a.display_type),a.parent&&t.append("parent",a.parent),t.append("meta_title",a.meta_title),t.append("meta_description",a.meta_description),t.append("meta_keywords",a.meta_keywords),t.append("isActive",a.isActive?"true":"false"),p&&t.append("image",p),r.forEach(e=>t.append("image",e));let s=await o.Z.post("/categories",t,{headers:{"Content-Type":"multipart/form-data"}}),n=s?.data??s;n?.success?(d.toast.success("Category created"),e.push("/admin/categories")):d.toast.error(n?.message||"Create failed")}catch(e){d.toast.error(e?.response?.data?.message||e.message||"Error")}finally{h(!1)}}return s.jsx(l.Z,{title:"Add Category",children:(0,s.jsxs)("div",{className:"card",children:[s.jsx("h3",{children:"Add Category"}),(0,s.jsxs)("form",{onSubmit:handleSubmit,children:[(0,s.jsxs)("div",{className:"form-row",children:[s.jsx("label",{children:"Name"}),s.jsx("input",{name:"name",value:a.name,onChange:handleChange,required:!0})]}),(0,s.jsxs)("div",{className:"form-row",children:[s.jsx("label",{children:"Slug"}),s.jsx("input",{name:"slug",value:a.slug,onChange:handleChange})]}),(0,s.jsxs)("div",{className:"form-row",children:[s.jsx("label",{children:"Description"}),s.jsx("textarea",{name:"description",value:a.description,onChange:handleChange,rows:"3"})]}),(0,s.jsxs)("div",{className:"form-row",children:[s.jsx("label",{children:"Parent Category (ID)"}),s.jsx("input",{name:"parent",value:a.parent,onChange:handleChange,placeholder:"parent category id (optional)"})]}),(0,s.jsxs)("div",{className:"form-row",children:[s.jsx("label",{children:"Thumbnail (single)"}),s.jsx("input",{type:"file",accept:"image/*",onChange:handleThumbnail})]}),(0,s.jsxs)("div",{className:"form-row",children:[s.jsx("label",{children:"Images (multiple)"}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:handleFiles})]}),(0,s.jsxs)("div",{className:"form-row",children:[s.jsx("label",{children:"Display Type"}),(0,s.jsxs)("select",{name:"display_type",value:a.display_type,onChange:handleChange,children:[s.jsx("option",{value:"default",children:"Default"}),s.jsx("option",{value:"products",children:"Products"}),s.jsx("option",{value:"subcategories",children:"Subcategories"}),s.jsx("option",{value:"both",children:"Both"})]})]}),(0,s.jsxs)("div",{className:"form-row",children:[s.jsx("label",{children:"Meta Title"}),s.jsx("input",{name:"meta_title",value:a.meta_title,onChange:handleChange})]}),(0,s.jsxs)("div",{className:"form-row",children:[s.jsx("label",{children:"Meta Description"}),s.jsx("input",{name:"meta_description",value:a.meta_description,onChange:handleChange})]}),(0,s.jsxs)("div",{className:"form-row",children:[s.jsx("label",{children:"Meta Keywords (comma separated)"}),s.jsx("input",{name:"meta_keywords",value:a.meta_keywords,onChange:handleChange})]}),s.jsx("div",{className:"form-row",children:(0,s.jsxs)("label",{children:[s.jsx("input",{type:"checkbox",name:"isActive",checked:a.isActive,onChange:handleChange})," Active"]})}),s.jsx("div",{style:{marginTop:12},children:s.jsx("button",{className:"btn",type:"submit",disabled:m,children:m?"Savingâ€¦":"Create Category"})})]})]})})}[l,o,d]=c.then?(await c)():c,r()}catch(e){r(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9816:e=>{e.exports=require("styled-jsx/style")},9648:e=>{e.exports=import("axios")},3590:e=>{e.exports=import("react-toastify")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")}};var a=require("../../../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),t=a.X(0,[761,544,994,450,345,597,142],()=>__webpack_exec__(2131));module.exports=t})();