"use strict";(()=>{var e={};e.id=209,e.ids=[209,888,660],e.modules={6344:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>h,default:()=>p,getServerSideProps:()=>x,getStaticPaths:()=>g,getStaticProps:()=>m,reportWebVitals:()=>b,routeModule:()=>j,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>S,unstable_getStaticParams:()=>f,unstable_getStaticPaths:()=>_,unstable_getStaticProps:()=>P});var s=r(7093),l=r(5244),i=r(1323),c=r(9209),o=r.n(c),d=r(9597),n=r(2882),u=e([d,n]);[d,n]=u.then?(await u)():u;let p=(0,i.l)(n,"default"),m=(0,i.l)(n,"getStaticProps"),g=(0,i.l)(n,"getStaticPaths"),x=(0,i.l)(n,"getServerSideProps"),h=(0,i.l)(n,"config"),b=(0,i.l)(n,"reportWebVitals"),P=(0,i.l)(n,"unstable_getStaticProps"),_=(0,i.l)(n,"unstable_getStaticPaths"),f=(0,i.l)(n,"unstable_getStaticParams"),y=(0,i.l)(n,"unstable_getServerProps"),S=(0,i.l)(n,"unstable_getServerSideProps"),j=new s.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/admin/products",pathname:"/admin/products",bundlePath:"",filename:""},components:{App:d.default,Document:o()},userland:n});a()}catch(e){a(e)}})},2882:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>ProductsPage});var s=r(997),l=r(5941),i=r(1842),c=r(3142),o=r(824),d=r(6689),n=r(3590),u=r(3692),p=r(1664),m=r.n(p),g=e([l,i,c,n]);[l,i,c,n]=g.then?(await g)():g;let fetchAllProducts=async()=>{let e=1,t=[],r=null;for(;e<=50;){let a=await i.Z.get("/products",{params:{page:e,limit:20,_t:Date.now()}}),s=a?.products??a?.data??a?.items??[],l=a?.total??a?.count??null;if(t=t.concat(s||[]),null===r&&null!==l&&(r=l),null!==r&&t.length>=r||!s||Array.isArray(s)&&s.length<20)break;e+=1}return{products:t,total:r??t.length}};function ProductsPage(){let{data:e,error:t,isValidating:r,mutate:a}=(0,l.default)("all-products",fetchAllProducts,{revalidateOnFocus:!0}),p=e?.products||[],handleDelete=async(e,t)=>{if(confirm(`Delete product: ${t}?`))try{await i.Z.delete(`/products/${e}`),n.toast.success("Product deleted"),a()}catch(e){n.toast.error("Failed to delete product")}},g=(0,d.useMemo)(()=>[{id:"image",name:"Image",cell:e=>e.images?.[0]?s.jsx("img",{src:e.images[0],alt:e.post_title||e.title||e.name,style:{height:40,borderRadius:4}}):"—",width:"90px"},{id:"title",name:"Title",selector:e=>e.post_title||e.title||e.name,sortable:!0,wrap:!0},{id:"sku",name:"SKU",selector:e=>e.sku||e.variants?.[0]?.sku||"—"},{id:"price",name:"Price",selector:e=>e.price?`₹${e.price}`:e.basePrice?`₹${e.basePrice}`:e.regular_price?`₹${e.regular_price}`:e.meta_total_sales?`Sold: ${e.meta_total_sales}`:"—"},{id:"stock",name:"Stock",selector:e=>e.manageStock?`${e.stockQuantity??e.stockQuantity??0} (${e.stock_status??"-"})`:e.stock_status??"-"},{id:"status",name:"Status",selector:e=>e.post_status??(e.isPublished?"publish":"draft"),sortable:!0},{id:"created",name:"Created At",selector:e=>e.createdAt?new Date(e.createdAt).toLocaleString():"-",sortable:!0},{id:"actions",name:"Actions",cell:e=>(0,s.jsxs)("div",{style:{display:"flex",gap:6},children:[s.jsx(m(),{href:`/admin/products/${e._id||e.id}`,legacyBehavior:!0,children:s.jsx("a",{className:"btn ghost",style:{padding:"4px 8px",display:"inline-flex",alignItems:"center",gap:4},children:s.jsx(u.rDJ,{})})}),s.jsx(m(),{href:`/admin/products/${e._id||e.id}/edit`,legacyBehavior:!0,children:s.jsx("a",{className:"btn",style:{padding:"4px 8px",display:"inline-flex",alignItems:"center",gap:4},children:s.jsx(u.vPQ,{})})}),s.jsx("button",{className:"btn",style:{background:"#ef4444",color:"white",padding:"4px 8px",display:"inline-flex",alignItems:"center",gap:4},onClick:()=>handleDelete(e._id||e.id,e.post_title||e.title||e.name),children:s.jsx(u.Ybf,{})})]}),ignoreRowClick:!0,allowOverflow:!0,button:!0}],[]);return t?s.jsx(c.Z,{title:"Products",children:s.jsx("div",{className:"card",children:"❌ Error loading products"})}):e?(0,s.jsxs)(c.Z,{title:"Products",children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[s.jsx("h2",{children:"Products"}),s.jsx(m(),{href:"/admin/products/new",legacyBehavior:!0,children:s.jsx("a",{className:"btn",children:"+ Add Product"})})]}),(0,s.jsxs)("div",{className:"card",children:[r&&s.jsx("div",{style:{marginBottom:8},children:"\uD83D\uDD04 Refreshing…"}),s.jsx(o.Z,{title:`Products (${p.length})`,columns:g,data:p,selectable:!0,defaultSortFieldId:"title"})]})]}):s.jsx(c.Z,{title:"Products",children:s.jsx("div",{className:"card",children:"⏳ Loading all products..."})})}a()}catch(e){a(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},5813:e=>{e.exports=require("react-csv")},2583:e=>{e.exports=require("react-data-table-component")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9816:e=>{e.exports=require("styled-jsx/style")},9648:e=>{e.exports=import("axios")},3590:e=>{e.exports=import("react-toastify")},5941:e=>{e.exports=import("swr")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[761,544,994,450,345,597,142,824],()=>__webpack_exec__(6344));module.exports=r})();