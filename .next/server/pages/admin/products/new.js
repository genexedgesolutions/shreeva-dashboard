"use strict";(()=>{var e={};e.id=870,e.ids=[870,888,660],e.modules={3098:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.r(a),t.d(a,{config:()=>x,default:()=>u,getServerSideProps:()=>m,getStaticPaths:()=>h,getStaticProps:()=>g,reportWebVitals:()=>j,routeModule:()=>w,unstable_getServerProps:()=>f,unstable_getServerSideProps:()=>S,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>b});var s=t(7093),n=t(5244),i=t(1323),l=t(9209),d=t.n(l),o=t(9597),c=t(5277),p=e([o,c]);[o,c]=p.then?(await p)():p;let u=(0,i.l)(c,"default"),g=(0,i.l)(c,"getStaticProps"),h=(0,i.l)(c,"getStaticPaths"),m=(0,i.l)(c,"getServerSideProps"),x=(0,i.l)(c,"config"),j=(0,i.l)(c,"reportWebVitals"),b=(0,i.l)(c,"unstable_getStaticProps"),y=(0,i.l)(c,"unstable_getStaticPaths"),v=(0,i.l)(c,"unstable_getStaticParams"),f=(0,i.l)(c,"unstable_getServerProps"),S=(0,i.l)(c,"unstable_getServerSideProps"),w=new s.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/admin/products/new",pathname:"/admin/products/new",bundlePath:"",filename:""},components:{App:o.default,Document:d()},userland:c});r()}catch(e){r(e)}})},5277:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.r(a),t.d(a,{default:()=>NewProduct});var s=t(997),n=t(6689),i=t(1163),l=t(3142),d=t(1842),o=t(3590),c=e([l,d,o]);function NewProduct(){let e=(0,i.useRouter)(),[a,t]=(0,n.useState)({title:"",slug:"",sku:"",shortDescription:"",description:"",category:"",brand:"",basePrice:"",salePrice:"",productType:"single",isPublished:!0,isMadeToOrder:!1,leadTimeDays:7,allowResizing:!0,allowEngraving:!1,makingCharges:0,stockQuantity:0,manageStock:!0,weightGrams:"",metaTitle:"",metaDescription:"",featured:!1,returnable:!1,warranty:""}),[r,c]=(0,n.useState)([]),[p,u]=(0,n.useState)([]),[g,h]=(0,n.useState)(""),[m,x]=(0,n.useState)(!1);function handleChange(e){let{name:a,value:r,type:s,checked:n}=e.target;t(e=>({...e,[a]:"checkbox"===s?n:r}))}function handleImages(e){let a=Array.from(e.target.files||[]);c(a),u(a.map(e=>URL.createObjectURL(e)))}async function handleSubmit(t){if(t.preventDefault(),!a.title?.trim()){o.toast.error("Title is required");return}if(!a.basePrice||isNaN(Number(a.basePrice))){o.toast.error("Base price is required (number)");return}x(!0);try{let t=new FormData;t.append("title",a.title),a.slug&&t.append("slug",a.slug),t.append("sku",a.sku),t.append("shortDescription",a.shortDescription),t.append("description",a.description),t.append("category",a.category),t.append("brand",a.brand),t.append("basePrice",a.basePrice),a.salePrice&&t.append("salePrice",a.salePrice),t.append("productType",a.productType),t.append("isPublished",a.isPublished?"true":"false"),t.append("isMadeToOrder",a.isMadeToOrder?"true":"false"),t.append("leadTimeDays",String(a.leadTimeDays||0)),t.append("allowResizing",a.allowResizing?"true":"false"),t.append("allowEngraving",a.allowEngraving?"true":"false"),t.append("makingCharges",String(a.makingCharges||0)),t.append("stockQuantity",String(a.stockQuantity||0)),t.append("manageStock",a.manageStock?"true":"false"),a.weightGrams&&t.append("weightGrams",String(a.weightGrams)),t.append("metaTitle",a.metaTitle),t.append("metaDescription",a.metaDescription),t.append("featured",a.featured?"true":"false"),t.append("returnable",a.returnable?"true":"false"),t.append("warranty",a.warranty||""),g?.trim()&&t.append("variants",g),r.forEach(e=>t.append("images",e));let s=await d.Z.post("/products",t,{headers:{"Content-Type":"multipart/form-data"}}),n=s?.data??s;n?.success||s?.success?(o.toast.success("Product created"),e.push("/admin/products")):o.toast.error(n?.message||"Failed to create product")}catch(e){console.error(e),o.toast.error(e?.response?.data?.message||e.message||"Error creating product")}finally{x(!1)}}return(0,s.jsxs)(l.Z,{title:"Add Product",children:[s.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:s.jsx("h2",{children:"Add Product"})}),s.jsx("form",{onSubmit:handleSubmit,children:s.jsx("div",{className:"card",style:{padding:20},children:(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 340px",gap:20},children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"form-row",children:[s.jsx("label",{children:"Title"}),s.jsx("input",{name:"title",value:a.title,onChange:handleChange,required:!0})]}),(0,s.jsxs)("div",{className:"form-row",children:[s.jsx("label",{children:"Slug"}),s.jsx("input",{name:"slug",value:a.slug,onChange:handleChange})]}),(0,s.jsxs)("div",{className:"form-row",children:[s.jsx("label",{children:"SKU"}),s.jsx("input",{name:"sku",value:a.sku,onChange:handleChange})]}),(0,s.jsxs)("div",{className:"form-row",children:[s.jsx("label",{children:"Short description"}),s.jsx("input",{name:"shortDescription",value:a.shortDescription,onChange:handleChange})]}),(0,s.jsxs)("div",{className:"form-row",children:[s.jsx("label",{children:"Description (HTML allowed)"}),s.jsx("textarea",{name:"description",value:a.description,onChange:handleChange,rows:6})]}),(0,s.jsxs)("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[(0,s.jsxs)("div",{children:[s.jsx("label",{children:"Base price (₹)"}),s.jsx("input",{type:"number",name:"basePrice",value:a.basePrice,onChange:handleChange})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{children:"Sale price (₹)"}),s.jsx("input",{type:"number",name:"salePrice",value:a.salePrice,onChange:handleChange})]})]}),(0,s.jsxs)("div",{className:"form-row",children:[s.jsx("label",{children:"Product type"}),(0,s.jsxs)("select",{name:"productType",value:a.productType,onChange:handleChange,children:[s.jsx("option",{value:"single",children:"Single"}),s.jsx("option",{value:"variant",children:"Variant"}),s.jsx("option",{value:"made-to-order",children:"Made To Order"})]})]}),(0,s.jsxs)("div",{className:"form-row",children:[s.jsx("label",{children:"Variants (optional JSON)"}),s.jsx("textarea",{placeholder:'Example: [{"sku":"SHJ-001","metal":"Gold","size":"6","price":45000,"inventory":5}]',value:g,onChange:e=>h(e.target.value),rows:4})]}),(0,s.jsxs)("div",{className:"form-row",children:[s.jsx("label",{children:"Category (ID)"}),s.jsx("input",{name:"category",value:a.category,onChange:handleChange,placeholder:"category id"})]}),(0,s.jsxs)("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[(0,s.jsxs)("div",{children:[s.jsx("label",{children:"Stock quantity"}),s.jsx("input",{type:"number",name:"stockQuantity",value:a.stockQuantity,onChange:handleChange})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{children:"Manage stock"}),(0,s.jsxs)("select",{name:"manageStock",value:String(a.manageStock),onChange:e=>t(a=>({...a,manageStock:"true"===e.target.value})),children:[s.jsx("option",{value:"true",children:"Yes"}),s.jsx("option",{value:"false",children:"No"})]})]})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:8,marginTop:8},children:[s.jsx("button",{className:"btn",type:"submit",disabled:m,children:m?"Saving…":"Create product"}),s.jsx("button",{type:"button",className:"btn ghost",onClick:()=>{t({title:"",slug:"",sku:"",shortDescription:"",description:"",category:"",brand:"",basePrice:"",salePrice:"",productType:"single",isPublished:!0,isMadeToOrder:!1,leadTimeDays:7,allowResizing:!0,allowEngraving:!1,makingCharges:0,stockQuantity:0,manageStock:!0,weightGrams:"",metaTitle:"",metaDescription:"",featured:!1,returnable:!1,warranty:""}),c([]),u([]),h("")},children:"Reset"})]})]}),(0,s.jsxs)("aside",{children:[(0,s.jsxs)("div",{className:"card",style:{marginBottom:12},children:[s.jsx("strong",{children:"Media"}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:handleImages,style:{marginTop:8}}),p.length>0&&s.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginTop:8},children:p.map((e,a)=>s.jsx("img",{src:e,style:{height:80,borderRadius:6}},a))})]}),(0,s.jsxs)("div",{className:"card",style:{marginBottom:12},children:[s.jsx("label",{children:"Brand"}),s.jsx("input",{name:"brand",value:a.brand,onChange:handleChange}),s.jsx("div",{style:{height:8}}),s.jsx("label",{children:"Weight (grams)"}),s.jsx("input",{type:"number",name:"weightGrams",value:a.weightGrams,onChange:handleChange})]}),(0,s.jsxs)("div",{className:"card",children:[s.jsx("label",{children:"Meta title"}),s.jsx("input",{name:"metaTitle",value:a.metaTitle,onChange:handleChange}),s.jsx("div",{style:{height:8}}),s.jsx("label",{children:"Meta description"}),s.jsx("input",{name:"metaDescription",value:a.metaDescription,onChange:handleChange})]})]})]})})})]})}[l,d,o]=c.then?(await c)():c,r()}catch(e){r(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9816:e=>{e.exports=require("styled-jsx/style")},9648:e=>{e.exports=import("axios")},3590:e=>{e.exports=import("react-toastify")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")}};var a=require("../../../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),t=a.X(0,[761,544,994,450,345,597,142],()=>__webpack_exec__(3098));module.exports=t})();