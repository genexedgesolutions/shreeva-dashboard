"use strict";(()=>{var e={};e.id=703,e.ids=[703,888,660],e.modules={2322:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{config:()=>h,default:()=>p,getServerSideProps:()=>g,getStaticPaths:()=>x,getStaticProps:()=>m,reportWebVitals:()=>_,routeModule:()=>j,unstable_getServerProps:()=>S,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>f,unstable_getStaticPaths:()=>b,unstable_getStaticProps:()=>P});var a=s(7093),l=s(5244),i=s(1323),o=s(9209),c=s.n(o),d=s(9597),n=s(7931),u=e([d,n]);[d,n]=u.then?(await u)():u;let p=(0,i.l)(n,"default"),m=(0,i.l)(n,"getStaticProps"),x=(0,i.l)(n,"getStaticPaths"),g=(0,i.l)(n,"getServerSideProps"),h=(0,i.l)(n,"config"),_=(0,i.l)(n,"reportWebVitals"),P=(0,i.l)(n,"unstable_getStaticProps"),b=(0,i.l)(n,"unstable_getStaticPaths"),f=(0,i.l)(n,"unstable_getStaticParams"),S=(0,i.l)(n,"unstable_getServerProps"),y=(0,i.l)(n,"unstable_getServerSideProps"),j=new a.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/admin/products/inventory",pathname:"/admin/products/inventory",bundlePath:"",filename:""},components:{App:d.default,Document:c()},userland:n});r()}catch(e){r(e)}})},7931:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>ProductsPage});var a=s(997),l=s(5941),i=s(1842),o=s(3142),c=s(824),d=s(6689),n=s(3590),u=s(3692),p=s(1664),m=s.n(p),x=e([l,i,o,n]);[l,i,o,n]=x.then?(await x)():x;let fetchAllProducts=async()=>{let e=1,t=[],s=0,r=20;for(;;){let a=await i.Z.get("/products",{params:{page:e,limit:r,_t:Date.now()}}),l=a?.products||a?.data||[];if(s=a?.total||s,r=a?.limit||r,(t=[...t,...l]).length>=s)break;e++}return{products:t,total:s}};function ProductsPage(){let{data:e,error:t,isValidating:s,mutate:r}=(0,l.default)("all-products",fetchAllProducts,{revalidateOnFocus:!0}),p=e?.products||[],handleDelete=async(e,t)=>{if(confirm(`Delete product: ${t}?`))try{await i.Z.delete(`/products/${e}`),n.toast.success("Product deleted"),r()}catch(e){n.toast.error("Failed to delete product")}},x=(0,d.useMemo)(()=>[{id:"image",name:"Image",cell:e=>e.images?.[0]?a.jsx("img",{src:e.images[0],alt:e.post_title,style:{height:40,borderRadius:4}}):"—",width:"90px"},{id:"title",name:"Title",selector:e=>e.post_title||e.name,sortable:!0,wrap:!0},{id:"sku",name:"SKU",selector:e=>e.sku||(e.post_content?.includes("SKU")?"See details":"—")},{id:"price",name:"Price",selector:e=>e.price?.sell?`₹${e.price.sell}`:e.meta_total_sales?`Sold: ${e.meta_total_sales}`:"—"},{id:"stock",name:"Stock",selector:e=>e.manageStock?`${e.stockQuantity} (${e.stock_status})`:e.stock_status||"—"},{id:"status",name:"Status",selector:e=>e.post_status,sortable:!0},{id:"created",name:"Created At",selector:e=>e.createdAt?new Date(e.createdAt).toLocaleString():"-",sortable:!0},{id:"actions",name:"Actions",cell:e=>(0,a.jsxs)("div",{style:{display:"flex",gap:6},children:[a.jsx(m(),{href:`/admin/products/${e._id}`,legacyBehavior:!0,children:a.jsx("a",{className:"btn ghost",style:{padding:"4px 8px",display:"inline-flex",alignItems:"center",gap:4},children:a.jsx(u.rDJ,{})})}),a.jsx(m(),{href:`/admin/products/${e._id}/edit`,legacyBehavior:!0,children:a.jsx("a",{className:"btn",style:{padding:"4px 8px",display:"inline-flex",alignItems:"center",gap:4},children:a.jsx(u.vPQ,{})})}),a.jsx("button",{className:"btn",style:{background:"#ef4444",color:"white",padding:"4px 8px",display:"inline-flex",alignItems:"center",gap:4},onClick:()=>handleDelete(e._id,e.post_title||e.name),children:a.jsx(u.Ybf,{})})]}),ignoreRowClick:!0,allowOverflow:!0,button:!0}],[r]);return t?a.jsx(o.Z,{title:"Products",children:a.jsx("div",{className:"card",children:"❌ Error loading products"})}):e?(0,a.jsxs)(o.Z,{title:"Products",children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[a.jsx("h2",{children:"Products"}),a.jsx(m(),{href:"/admin/products/new",legacyBehavior:!0,children:a.jsx("a",{className:"btn",children:"+ Add Product"})})]}),(0,a.jsxs)("div",{className:"card",children:[s&&a.jsx("div",{style:{marginBottom:8},children:"\uD83D\uDD04 Refreshing…"}),a.jsx(c.Z,{title:`Products (${p.length})`,columns:x,data:p,selectable:!0,defaultSortFieldId:"title"})]})]}):a.jsx(o.Z,{title:"Products",children:a.jsx("div",{className:"card",children:"⏳ Loading all products..."})})}r()}catch(e){r(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},5813:e=>{e.exports=require("react-csv")},2583:e=>{e.exports=require("react-data-table-component")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9816:e=>{e.exports=require("styled-jsx/style")},9648:e=>{e.exports=import("axios")},3590:e=>{e.exports=import("react-toastify")},5941:e=>{e.exports=import("swr")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[761,544,994,450,345,597,142,824],()=>__webpack_exec__(2322));module.exports=s})();