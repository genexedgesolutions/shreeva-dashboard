"use strict";(()=>{var e={};e.id=635,e.ids=[635,888,660],e.modules={1839:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>h,default:()=>u,getServerSideProps:()=>g,getStaticPaths:()=>x,getStaticProps:()=>m,reportWebVitals:()=>f,routeModule:()=>S,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>_,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>b});var a=r(7093),i=r(5244),l=r(1323),n=r(9209),d=r.n(n),o=r(9597),c=r(5991),p=e([o,c]);[o,c]=p.then?(await p)():p;let u=(0,l.l)(c,"default"),m=(0,l.l)(c,"getStaticProps"),x=(0,l.l)(c,"getStaticPaths"),g=(0,l.l)(c,"getServerSideProps"),h=(0,l.l)(c,"config"),f=(0,l.l)(c,"reportWebVitals"),b=(0,l.l)(c,"unstable_getStaticProps"),j=(0,l.l)(c,"unstable_getStaticPaths"),y=(0,l.l)(c,"unstable_getStaticParams"),v=(0,l.l)(c,"unstable_getServerProps"),_=(0,l.l)(c,"unstable_getServerSideProps"),S=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/admin/users",pathname:"/admin/users",bundlePath:"",filename:""},components:{App:o.default,Document:d()},userland:c});s()}catch(e){s(e)}})},5991:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>AdminUsers});var a=r(997),i=r(5941),l=r(1842),n=r(3142),d=r(824),o=r(6689),c=r(3590),p=r(3692),u=r(1664),m=r.n(u),x=e([i,l,n,c]);[i,l,n,c]=x.then?(await x)():x;let fetcher=e=>l.Z.get(e,{params:{_t:Date.now()}});function AdminUsers(){let{data:e,error:t,isValidating:r,mutate:s}=(0,i.default)("/auth/getAllUser",fetcher,{revalidateOnFocus:!0}),handleDelete=async(e,t)=>{if(confirm(`Delete ${t}?`))try{await l.Z.delete(`/auth/delete/${e}`),c.toast.success("User deleted"),s()}catch(e){c.toast.error("Failed to delete user")}},u=(0,o.useMemo)(()=>[{id:"name",name:"Name",selector:e=>`${e.firstName??""} ${e.lastName??""}`.trim(),sortable:!0},{id:"email",name:"Email",selector:e=>e.email,sortable:!0},{id:"phone",name:"Phone",selector:e=>e.phone||"—"},{id:"role",name:"Role",selector:e=>e.role,sortable:!0},{id:"created",name:"Created At",selector:e=>e.createdAt?new Date(e.createdAt).toLocaleString():"-",sortable:!0},{id:"actions",name:"Actions",cell:e=>(0,a.jsxs)("div",{style:{display:"flex",gap:6},children:[a.jsx("a",{href:`/admin/users/${e._id}/view`,className:"btn ghost",style:{padding:"4px 8px",display:"inline-flex",alignItems:"center",gap:4},children:a.jsx(p.rDJ,{})}),a.jsx("a",{href:`/admin/users/${e._id}/edit`,className:"btn",style:{padding:"4px 8px",display:"inline-flex",alignItems:"center",gap:4},children:a.jsx(p.vPQ,{})}),a.jsx("button",{className:"btn",style:{background:"#ef4444",color:"white",padding:"4px 8px",display:"inline-flex",alignItems:"center",gap:4},onClick:()=>handleDelete(e._id,`${e.firstName} ${e.lastName}`),children:a.jsx(p.Ybf,{})})]}),ignoreRowClick:!0,allowOverflow:!0,button:!0}],[s]);if(t)return a.jsx(n.Z,{title:"Admin Users",children:a.jsx("div",{className:"card",children:"❌ Error loading users"})});if(!e)return a.jsx(n.Z,{title:"Admin Users",children:a.jsx("div",{className:"card",children:"⏳ Loading..."})});let x=e?.users||[];return(0,a.jsxs)(n.Z,{title:"Admin Users",children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[a.jsx("h2",{children:"Users"}),a.jsx(m(),{href:"/admin/users/add",legacyBehavior:!0,children:(0,a.jsxs)("a",{className:"btn",style:{display:"inline-flex",alignItems:"center",gap:6},children:[a.jsx(p.zy7,{})," Add User"]})})]}),(0,a.jsxs)("div",{className:"card",children:[r&&a.jsx("div",{style:{marginBottom:8},children:"\uD83D\uDD04 Refreshing…"}),a.jsx(d.Z,{title:`Users (${x.length})`,columns:u,data:x.filter(e=>"customer"!==e.role),selectable:!0,defaultSortFieldId:"name"})]})]})}s()}catch(e){s(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},5813:e=>{e.exports=require("react-csv")},2583:e=>{e.exports=require("react-data-table-component")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9816:e=>{e.exports=require("styled-jsx/style")},9648:e=>{e.exports=import("axios")},3590:e=>{e.exports=import("react-toastify")},5941:e=>{e.exports=import("swr")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[761,544,994,450,345,597,142,824],()=>__webpack_exec__(1839));module.exports=r})();